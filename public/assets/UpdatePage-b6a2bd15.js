import{f as g,g as f,k as y,r as I,h as E,i as h}from"./index-2759bd4d.js";import{u as M}from"./useUploadForm-7b0feb18.js";import{u as P}from"./useGetImageItem-b79b06ed.js";import"./Form-5430d62d.js";import"./index-1ac1d1ef.js";import"./FormCheckInput-440b069a.js";import"./DropDown-6d4518bd.js";import"./useWindow-1432213c.js";import"./Button-548860b2.js";function S(){const p=g(),n=f(),t=new URLSearchParams(location.search).get("id"),r=y(o=>t?o.imageItems.find(s=>s.id===+t):void 0),e=P(t),[d,m,c]=M({id:+t,onSubmit:u,updating:!0,title:e.type==="IMAGE_ITEM"?e.payload.title:"",description:e.type==="IMAGE_ITEM"?e.payload.description:"",category:e.type==="IMAGE_ITEM"?e.payload.category:"Other"});if(I.useEffect(()=>{r&&c(r.title,r.description,r.category)},[r]),e.type==="COMPONENT")return e.payload;async function u(o,s,l,i){const a=new FormData;if(a.append("image",l),a.append("title",o),a.append("description",s),a.append("id",t),a.append("category",i),(await fetch(`${E}/update?id=${t}`,{body:a,...h("POST")})).status>299){m();return}n({type:"UPDATE_IMAGE_ITEM",payload:{id:+t,title:o,description:s,category:i}}),p(`/views?id=${t}`)}return d}export{S as default};
