import{r,f as x,j as s,S as b,g as S,l as y,s as j}from"./index-6523de4f.js";import{C as _}from"./Container-ac3fe539.js";import{F as i}from"./Form-d63cde17.js";import{B as E}from"./Button-984d1bdd.js";import"./index-a3d930ca.js";import"./FormCheckInput-427c7d16.js";const k="_group_14r1y_1",N="_button_14r1y_6",v="_form_14r1y_10",n={group:k,button:N,form:v,switch:"_switch_14r1y_14"},D=()=>{const[o,c]=r.useState(!1),[u,l]=r.useState(!1),m=x(),[d,p]=r.useState(""),[e,g]=r.useState(!1),f=async t=>{t.preventDefault(),l(!1),c(!0);const a=await(await fetch(`${S}/login`,{method:"POST",headers:{password:d,token:y()??"",singleUse:e.toString()}})).json();if(c(!1),p(""),"token"in a){j(a.token),m({type:"SET_TOKEN",payload:a.token});return}l(!0)},h=t=>{p(t.target.value)},w=()=>{g(t=>!t)};return s.jsx(_,{fluid:!0,className:"d-flex align-items-center justify-content-center",style:{height:"100vh"},children:s.jsxs(i,{onSubmit:f,className:n.form,children:[s.jsxs(i.Group,{className:n.group,controlId:"formPassword",children:[s.jsx("h2",{className:"text-center",children:e?"Single-use password":"Password"}),s.jsx(i.Control,{value:d,onChange:h,disabled:o,type:"password",placeholder:e?"Enter single use password":"Enter password"}),s.jsx("button",{type:"button",onClick:w,className:n.switch,children:e?"Enter normal password":"Enter single use password"}),u&&s.jsx("p",{className:"text-danger fs-3",children:"Incorrect password!"})]}),o&&s.jsx(b,{variant:"primary",animation:"border"}),s.jsx(E,{className:n.button,variant:"primary",type:"submit",disabled:o,children:"Login"})]})})};export{D as default};
