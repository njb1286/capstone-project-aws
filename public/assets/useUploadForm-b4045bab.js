import{r as u,j as t,f as q,l as k,S as z}from"./index-ddee622c.js";import{F as l,a as S,b as _}from"./Form-87c49260.js";import{D as J}from"./DropDown-1b2b41f8.js";import{B as K}from"./ButtonGroup-d91e9d9e.js";import{B as D}from"./Button-9819f6b5.js";const Q="_btn_1ih27_11",W="_buttons_1ih27_16",X="_spinner_1ih27_20",Y="_visible_1ih27_23",Z="_submit_1ih27_34",P="_dropdown_1ih27_41",ee="_categories_1ih27_48",n={"form-items":"_form-items_1ih27_1","upload-form":"_upload-form_1ih27_5",btn:Q,buttons:W,spinner:X,visible:Y,submit:Z,dropdown:P,categories:ee,"category-item":"_category-item_1ih27_53"};function te(a,i){switch(i.type){case"SET_IS_VALID":return{...a,isValid:i.payload};case"SET_TOUCHED":return{...a,touched:i.payload};case"SET_VALUE":return{...a,value:i.payload};case"SET_ERROR_MESSAGE":return{...a,errorMessage:i.payload};default:return a}}function v(a,i,m,p,c){const[s,o]=u.useReducer(te,m),g=r=>{o({type:"SET_VALUE",payload:p(r)})},f=()=>{o({type:"SET_TOUCHED",payload:!0});const r=c(s.value);o({type:"SET_IS_VALID",payload:!r}),typeof r!=typeof s.errorMessage&&r!==s.errorMessage&&o({type:"SET_ERROR_MESSAGE",payload:r})},d=()=>{o({type:"SET_TOUCHED",payload:!1})},b=r=>{o({type:"SET_TOUCHED",payload:r})},h=r=>{o({type:"SET_IS_VALID",payload:r})},y=r=>{o({type:"SET_VALUE",payload:r})};return[t.jsxs(t.Fragment,{children:[t.jsx(a,{onBlur:f,onFocus:d,onChange:g,isValid:s.isValid&&s.touched,isInvalid:!s.isValid&&s.touched,defaultValue:typeof s.value=="string"||typeof s.value=="number"?s.value:void 0,...i,as:i.as}),t.jsx(l.Label,{style:{visibility:s.touched&&!s.isValid?"visible":"hidden"},className:"text-danger",children:s.errorMessage??"valid"})]}),!c(s.value),s.value,b,h,y]}function le(a){const[i,m]=u.useState(!1),[p,c]=u.useState(a.category??"Other"),[s,o]=u.useState(!1),g=q(),f=e=>{if(e.preventDefault(),!h||!T||!V){j.forEach(E=>E(!0));return}m(!0),a.onSubmit(y,L,M,p)};function d(e){return{touched:!1,isValid:!1,value:e,errorMessage:void 0}}const[b,h,y,x,r,C]=v(S,{as:"input"},d(a.title??""),e=>e.target.value,e=>{if(e.length===0)return"Title is required"}),[I,T,L,F,N,A]=v(S,{as:"textarea",style:{height:"300px"}},d(a.description??""),e=>e.target.value,e=>{if(e.length===0)return"Description is required"}),[H,V,M,R,U]=v(S,{type:"file",accept:"image/*"},d(null),e=>e.target.files[0],e=>{if(!e&&a.updating!==!0)return"Image is required"}),j=[x,F,R],w=[r,N,U];u.useEffect(()=>{a.updating===!0&&(w.forEach(e=>e(!0)),j.forEach(e=>e(!0)))},[]);const O=()=>{o(!0),m(!1)},B=(e,E,G)=>{C(e),A(E),c(G)},$=t.jsx("p",{className:"text-danger",children:"An error occurred!"});return[t.jsxs("div",{className:n["upload-form"],children:[t.jsxs(l,{onSubmit:f,children:[t.jsxs("div",{className:n["form-items"],children:[t.jsxs(_,{children:[t.jsx(l.Label,{children:"Title"}),b]}),t.jsxs(_,{children:[t.jsx(l.Label,{children:"Image"}),H]}),t.jsxs(_,{children:[t.jsx(l.Label,{children:"Description"}),I]}),t.jsxs(_,{children:[t.jsx(l.Label,{children:"Category"}),t.jsx(J,{className:n.dropdown,onSelect:c,categories:k,default:p})]})]}),t.jsx(z,{className:`${n.spinner} ${i?n.visible:""}`,variant:"primary",animation:"border"}),t.jsxs(K,{className:n.buttons,children:[t.jsx(D,{disabled:!h||!T||!V||i,className:n.btn,type:"submit",children:"Submit"}),a.updating&&t.jsx(D,{className:`${n.btn} btn-danger`,type:"button",onClick:()=>g(`/views?id=${a.id}`),children:"Cancel"})]})]}),s&&$]}),O,B]}export{le as u};
