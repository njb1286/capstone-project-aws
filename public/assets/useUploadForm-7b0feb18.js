import{r as f,u as k,j as e,c as J,f as K,l as P,S as Q}from"./index-2759bd4d.js";import{F as p,a as x,b as _}from"./Form-5430d62d.js";import{D as W}from"./DropDown-6d4518bd.js";import{B as D}from"./Button-548860b2.js";const C=f.forwardRef(({bsPrefix:a,size:r,vertical:d=!1,className:m,role:c="group",as:s="div",...o},h)=>{const u=k(a,"btn-group");let n=u;return d&&(n=`${u}-vertical`),e.jsx(s,{...o,ref:h,role:c,className:J(m,n,r&&`${u}-${r}`)})});C.displayName="ButtonGroup";const X=C,Y="_btn_1ih27_11",Z="_buttons_1ih27_16",z="_spinner_1ih27_20",ee="_visible_1ih27_23",te="_submit_1ih27_34",se="_dropdown_1ih27_41",ae="_categories_1ih27_48",l={"form-items":"_form-items_1ih27_1","upload-form":"_upload-form_1ih27_5",btn:Y,buttons:Z,spinner:z,visible:ee,submit:te,dropdown:se,categories:ae,"category-item":"_category-item_1ih27_53"};function re(a,r){switch(r.type){case"SET_IS_VALID":return{...a,isValid:r.payload};case"SET_TOUCHED":return{...a,touched:r.payload};case"SET_VALUE":return{...a,value:r.payload};case"SET_ERROR_MESSAGE":return{...a,errorMessage:r.payload};default:return a}}function v(a,r,d,m,c){const[s,o]=f.useReducer(re,d),h=i=>{o({type:"SET_VALUE",payload:m(i)})},u=()=>{o({type:"SET_TOUCHED",payload:!0});const i=c(s.value);o({type:"SET_IS_VALID",payload:!i}),typeof i!=typeof s.errorMessage&&i!==s.errorMessage&&o({type:"SET_ERROR_MESSAGE",payload:i})},n=()=>{o({type:"SET_TOUCHED",payload:!1})},b=i=>{o({type:"SET_TOUCHED",payload:i})},g=i=>{o({type:"SET_IS_VALID",payload:i})},y=i=>{o({type:"SET_VALUE",payload:i})};return[e.jsxs(e.Fragment,{children:[e.jsx(a,{onBlur:u,onFocus:n,onChange:h,isValid:s.isValid&&s.touched,isInvalid:!s.isValid&&s.touched,defaultValue:typeof s.value=="string"||typeof s.value=="number"?s.value:void 0,...r,as:r.as}),e.jsx(p.Label,{style:{visibility:s.touched&&!s.isValid?"visible":"hidden"},className:"text-danger",children:s.errorMessage??"valid"})]}),!c(s.value),s.value,b,g,y]}function ue(a){const[r,d]=f.useState(!1),[m,c]=f.useState(a.category??"Other"),[s,o]=f.useState(!1),h=K(),u=t=>{if(t.preventDefault(),!g||!T||!V){j.forEach(E=>E(!0));return}d(!0),a.onSubmit(y,L,M,m)};function n(t){return{touched:!1,isValid:!1,value:t,errorMessage:void 0}}const[b,g,y,S,i,I]=v(x,{as:"input"},n(a.title??""),t=>t.target.value,t=>{if(t.length===0)return"Title is required"}),[N,T,L,F,R,A]=v(x,{as:"textarea",style:{height:"300px"}},n(a.description??""),t=>t.target.value,t=>{if(t.length===0)return"Description is required"}),[H,V,M,$,w]=v(x,{type:"file",accept:"image/*"},n(null),t=>t.target.files[0],t=>{if(!t&&a.updating!==!0)return"Image is required"}),j=[S,F,$],U=[i,R,w];f.useEffect(()=>{a.updating===!0&&(U.forEach(t=>t(!0)),j.forEach(t=>t(!0)))},[]);const B=()=>{o(!0),d(!1)},O=(t,E,q)=>{I(t),A(E),c(q)},G=e.jsx("p",{className:"text-danger",children:"An error occurred!"});return[e.jsxs("div",{className:l["upload-form"],children:[e.jsxs(p,{onSubmit:u,children:[e.jsxs("div",{className:l["form-items"],children:[e.jsxs(_,{children:[e.jsx(p.Label,{children:"Title"}),b]}),e.jsxs(_,{children:[e.jsx(p.Label,{children:"Image"}),H]}),e.jsxs(_,{children:[e.jsx(p.Label,{children:"Description"}),N]}),e.jsxs(_,{children:[e.jsx(p.Label,{children:"Category"}),e.jsx(W,{className:l.dropdown,onSelect:c,categories:P,default:m})]})]}),e.jsx(Q,{className:`${l.spinner} ${r?l.visible:""}`,variant:"primary",animation:"border"}),e.jsxs(X,{className:l.buttons,children:[e.jsx(D,{disabled:!g||!T||!V||r,className:l.btn,type:"submit",children:"Submit"}),a.updating&&e.jsx(D,{className:`${l.btn} btn-danger`,type:"button",onClick:()=>h(`/views?id=${a.id}`),children:"Cancel"})]})]}),s&&G]}),B,O]}export{ue as u};
