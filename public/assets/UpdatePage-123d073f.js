import{e as g,f,i as y,r as I,g as E,h}from"./index-c94b69a8.js";import{u as M}from"./useUploadForm-9f47c24b.js";import{u as P}from"./useGetImageItem-e1433f55.js";import"./Form-da7aeaba.js";import"./index-10dd5602.js";import"./FormCheckInput-970a4518.js";import"./DropDown-a7a49437.js";import"./DataKey-305905e3.js";import"./useWindow-0f7d2268.js";import"./mergeOptionsWithPopperConfig-c6e84cf7.js";import"./Button-b7dd3647.js";import"./ButtonGroup-0c217281.js";import"./PageNotFound-30050267.js";import"./index-ee4d5140.js";function R(){const p=g(),n=f(),t=new URLSearchParams(location.search).get("id"),r=y(o=>t?o.imageItems.find(i=>i.id===+t):void 0),e=P(t),[m,d,c]=M({id:+t,onSubmit:u,updating:!0,title:e.type==="IMAGE_ITEM"?e.payload.title:"",description:e.type==="IMAGE_ITEM"?e.payload.description:"",category:e.type==="IMAGE_ITEM"?e.payload.category:"Other"});if(I.useEffect(()=>{r&&c(r.title,r.description,r.category)},[r]),e.type==="COMPONENT")return e.payload;async function u(o,i,l,s){const a=new FormData;if(a.append("image",l),a.append("title",o),a.append("description",i),a.append("id",t),a.append("category",s),(await fetch(`${E}/update?id=${t}`,{body:a,...h("POST")})).status>299){d();return}n({type:"UPDATE_IMAGE_ITEM",payload:{id:+t,title:o,description:i,category:s}}),p(`/views?id=${t}`)}return m}export{R as default};
